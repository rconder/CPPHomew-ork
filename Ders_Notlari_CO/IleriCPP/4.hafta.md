# 4.Hafta

## İçindekiler

- [4.Hafta](#4hafta)
  - [İçindekiler](#i̇çindekiler)
  - [Literal Operator Functions](#literal-operator-functions)
    - [Strong Types](#strong-types)
    - [Raw String Literal](#raw-string-literal)

## Literal Operator Functions

6.Derste anlatılan kısım [Literal Operator Functions](3.hafta.md#literal-operator-functions)

- Uncooked ve cooked ayrıştımrak için

```c++
#include "Date.h"

Date operator""_dt(const char* p);

Date operator""_dts(const char* p, std::size_t n) 
{
    std::puts(p);
    cout << "n = " << n << "\n";
    return {};
}

int main()
{
    //23051987_dt fonksiyonunu bir yazı olarak alsın
    Date dx = 23'05'1987_dt;  //Date dx = 23051987_dt;
    cout<<  "23-05-1987"_dts; 
}
```

Çoğunlukla `size_t` değerini kullanmıyoruz.

- Parametre `char` olabilir.

```c++
int operator""_i(char c)
{
    return static_cast<int>(c);
}

void operator""_pr(const char *p)
{
    std::cout << p << std::endl;
}

int main()
{
    'A'_i;
    34.56_pr;
    123498_pr;
}
```

```c++
constexpr std::string operator""_ds(const char *p, std::size_t)
{
    return std::string{p} +" " + p;
}

int main()
{
    using namespace std;
    auto str = "murat yilmaz"_ds;
    cout <<"|"<< str << "|\n";
}
```

Geri dönüş değeri için bir kısıtlama yok

```c++

std::vectır<char> operator""_vec(const char *p, std::size_t n)
{
    std::vector<char> ret(n);
    int i{};
    while(*p)
        ret[i++] = (*p++);
    return ret;
}

int main()
{
    auto vec = "ahahahahahah"_vec;
    std::cout << vec.size() << "\n";
    for (auto c :vec)
    {
        std::cout << c << " ";
    }
    std::cout << "\n";
}
```

### Strong Types

Bir çok programda gerçek sayı ve tam sayı türlerini daraltılmış bir konseptte kullanıyoruz. Bu kullanımların bazı sakıncaları var.

- Tür dönüşümleri kullanılan primitive türlere göre yapılacak ve kullanım amacımızı anlaması zorlaşıcak örneğin:

```c++
class Meter
{
public: 
    struct PreventUsage{};
    //explicit Meter(double dval) : value{dval} {} // copy init sentaks hatası oluyor.
    Meter(PeventUsage, double dval) : value{dval} {}
private:
    double value;
};

double operator""_m(long double dval)
{
    return Meter{Meter::PreventUsage{},static_cast<double> dval};
}

int main()
{
    Meter m1;
    double dval = 56.08;

}
```

### Raw String Literal

- Bir string literali oluşturulduğuna çift tırnak karakteri escape edilmek zorundaydı

```c++
namespace STD
{
    inline namespace Literal{
        inline namespace StrinLiterals
        {
            std::string operator""_s(const char *p, std::size_t);
        }
    }
}

int main()
{
    using namespace std;
    const char *p = "\"\"\"\\C++\\C++\\ali";
    using namespace std::literals;
    
    auto name = "mustafa"s;
}
```

Normal string yazım notasyonunda bazı karakterleri *escape* etmemiz gerekiyor.